<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ø¬Ù†Ú¯ Ù‡ÙˆØ§Ù¾ÛŒÙ…Ø§Ù‡Ø§ - Ù…ÙˆØ¨Ø§ÛŒÙ„</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: #111;
        touch-action: none;
        font-family: sans-serif;
    }
    canvas {
        display: block;
        margin: 0 auto;
        background: #222;
    }
    #shootBtn {
        position: fixed;
        bottom: 10px;
        right: 10px;
        width: 70px;
        height: 70px;
        border-radius: 50%;
        background: #f00;
        color: white;
        font-size: 20px;
        text-align: center;
        line-height: 70px;
        user-select: none;
        z-index: 10;
    }
</style>
</head>
<body>

<canvas id="game"></canvas>
<div id="shootBtn">ğŸ”«</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// ØªÙ†Ø¸ÛŒÙ… Ø§Ù†Ø¯Ø§Ø²Ù‡ canvas Ø±ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
function resizeCanvas(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

// Ø¨Ø§Ø²ÛŒÚ©Ù†
let playerImg = new Image();
playerImg.src = 'assets/player.png'; // ÙÙ‚Ø· Ù‡Ù…ÛŒÙ† ØªØµÙˆÛŒØ± Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª

let player = {
    x: 50,
    y: canvas.height/2 - 50,
    w: 100,
    h: 100
};

// Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§
let bullets = [];

// Ø´Ù„ÛŒÚ© Ú¯Ù„ÙˆÙ„Ù‡
function shoot() {
    bullets.push({
        x: player.x + player.w,
        y: player.y + player.h/2 - 10,
        w: 20,
        h: 20,
        speed: 8
    });
}

// Ú©Ù†ØªØ±Ù„ Ø­Ø±Ú©Øª Ø¨Ø§Ø²ÛŒÚ©Ù† Ù„Ù…Ø³ÛŒ
canvas.addEventListener("touchmove", function(e){
    let t = e.touches[0];
    let rect = canvas.getBoundingClientRect();
    player.y = t.clientY - rect.top - player.h/2;
    if(player.y < 0) player.y = 0;
    if(player.y + player.h > canvas.height) player.y = canvas.height - player.h;
    e.preventDefault();
});

// Ø¯Ú©Ù…Ù‡ Ø´Ù„ÛŒÚ©
document.getElementById("shootBtn").addEventListener("touchstart", shoot);

// Ø¢Ù¾Ø¯ÛŒØª Ø¨Ø§Ø²ÛŒ
function update() {
    // Ø­Ø±Ú©Øª Ú¯Ù„ÙˆÙ„Ù‡
    bullets.forEach((b,i)=>{
        b.x += b.speed;
        if(b.x > canvas.width) bullets.splice(i,1);
    });

    draw();
    requestAnimationFrame(update);
}

// Ø±Ø³Ù…
function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Ø¨Ø§Ø²ÛŒÚ©Ù†
    ctx.drawImage(playerImg, player.x, player.y, player.w, player.h);

    // Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§
    ctx.fillStyle = "#ff0";
    bullets.forEach(b=>{
        ctx.fillRect(b.x, b.y, b.w, b.h);
    });
}

update();
</script>

</body>
</html>
