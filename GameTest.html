<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ø¬Ù†Ú¯ Ù‡ÙˆØ§Ù¾ÛŒÙ…Ø§Ù‡Ø§ - Ø¹Ù…ÙˆØ¯ÛŒ</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: #111;
        font-family: sans-serif;
    }
    canvas {
        display: block;
        margin: 0 auto;
        background: #222;
    }
    .btn {
        position: fixed;
        bottom: 20px;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: rgba(255,0,0,0.8);
        color: white;
        font-size: 30px;
        text-align: center;
        line-height: 60px;
        user-select: none;
        z-index: 10;
    }
    #btnLeft { left: 20px; }
    #btnRight { left: 100px; }
    #shootBtn { right: 20px; bottom: 20px; }
</style>
</head>
<body>

<canvas id="game"></canvas>
<div class="btn" id="btnLeft">â—€</div>
<div class="btn" id="btnRight">â–¶</div>
<div class="btn" id="shootBtn">ðŸ”«</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resizeCanvas(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

// Ø¨Ø§Ø²ÛŒÚ©Ù†
let playerImg = new Image();
playerImg.src = 'assets/player.png';

let player = {
    x: canvas.width/2,
    y: canvas.height - 120,
    w: 100,
    h: 100,
    speed: 6
};

// Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§
let bullets = [];

// Ø­Ø±Ú©Øª Ø¨Ø§ Ø¯Ú©Ù…Ù‡
let moveLeft = false;
let moveRight = false;

// Ø´Ù„ÛŒÚ©
function shoot() {
    bullets.push({
        x: player.x - player.w/2 + 40,
        y: player.y - 20,
        w: 20,
        h: 20,
        speed: 10
    });
}

// Ú©Ù†ØªØ±Ù„ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
document.getElementById("btnLeft").addEventListener("touchstart", ()=>moveLeft=true);
document.getElementById("btnLeft").addEventListener("touchend", ()=>moveLeft=false);
document.getElementById("btnRight").addEventListener("touchstart", ()=>moveRight=true);
document.getElementById("btnRight").addEventListener("touchend", ()=>moveRight=false);
document.getElementById("shootBtn").addEventListener("touchstart", shoot);

// Ø¢Ù¾Ø¯ÛŒØª
function update() {
    if(moveLeft) player.x -= player.speed;
    if(moveRight) player.x += player.speed;

    if(player.x - player.w/2 < 0) player.x = player.w/2;
    if(player.x + player.w/2 > canvas.width) player.x = canvas.width - player.w/2;

    // Ø­Ø±Ú©Øª Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§
    bullets.forEach((b,i)=>{
        b.y -= b.speed;
        if(b.y + b.h < 0) bullets.splice(i,1);
    });

    draw();
    requestAnimationFrame(update);
}

// Ø±Ø³Ù… Ø¨Ø§ Ú†Ø±Ø®Ø´
function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Ø¨Ø§Ø²ÛŒÚ©Ù† Ú†Ø±Ø®ÛŒØ¯Ù‡ (Ù†ÙˆÚ© Ø¨Ù‡ Ø¨Ø§Ù„Ø§)
    ctx.save();
    ctx.translate(player.x, player.y + player.h/2); // Ù…Ø±Ú©Ø² Ø¨Ø±Ø§ÛŒ Ú†Ø±Ø®Ø´
    ctx.rotate(-Math.PI/2); // 90 Ø¯Ø±Ø¬Ù‡ Ø¬Ù‡Øª Ø¹Ù…ÙˆØ¯ÛŒ
    ctx.drawImage(playerImg, -player.w/2, -player.h/2, player.w, player.h);
    ctx.restore();

    // Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§
    ctx.fillStyle = "#ff0";
    bullets.forEach(b=>{
        ctx.fillRect(b.x, b.y, b.w, b.h);
    });
}

update();
</script>

</body>
</html>
